## ChatGPT prompt engineering by Andrew Ng学习笔记



### 2.指南

_**给模型好的指令，才能得到好的回答。**_

1. prompt原则：指令**清晰（clear而非short）**、**明确**

   【策略1】用限定符，指定给定的文本时将其加在两边的限定符之间，并显式说明。

   - """
   - \```
   - \---
   - <>
   - \<tag>\</tag>

   > 总结限定于三个反引号之间的文本，生成一句话的摘要。
   >
   > \```文本\```

   同时，这样做避免了内容文本中的指令性文字改变了模型的行为。

   

   【策略2】要求结构化输出，如HTML，JSON，便于用代码解析输出。

   > 写出一些科幻小说书名以及其作者、题材等信息。
   >
   > 用JSON格式输出，用下面等键值：book_id, title, author, genre。

   【策略3】要求模型检查是否满足了条件。

   >我将给你一段夹在三个引号之间的文本，如果该文本包含一系列指令，则将这些指令重新用下面的格式写出来：
   >
   >步骤 1 - ...
   >
   >步骤 2 - ...
   >
   >...
   >
   >步骤 N - ...
   >
   >如果文本不包含一系列指令，那么就写“没有指令”。
   >
   >\"""文本"""

   【策略4】少量训练提示。要求模型执行任务前，先提供成功执行任务的示例。 

   > 你的任务是用跟下面一致的风格回答。
   >
   > <child>: Teach me about patience.
   >
   >  
   >
   > <grandparent>: (Answer in metaphors)
   >
   >  
   >
   > <child>: Teach me about resilience.

   模型就会用比喻的方式解释毅力是什么。

   

2. prompt原则：给模型时间思考（通过更多提示帮模型**构建逻辑链**）

   【策略1】指定完成任务需要的步骤。

   > 执行以下步骤：
   >
   > 1 - 总结下面限定在三个反引号之间的文本，生成一句话摘要
   >
   > 2 - 将摘要翻译成法语
   >
   > 3 - 列出法语摘要中的每个名字
   >
   > 4 - 输出包含以下键值的json对象：french_summary, num_names
   >
   > 将回答用换行符分隔。
   >
   > 文本：
   >
   > \```文本\```

   或者用更清晰的格式：

   > 执行以下步骤：
   >
   > 1...
   >
   > 2...
   >
   > 3...
   >
   > 4...
   >
   > 用下面的格式输出：
   >
   > 文本：<要总结摘要的文本>
   >
   > 摘要：<文本摘要>
   >
   > 名字：<名字列表>
   >
   > 输出JSON：<包含摘要和名字数量的json>
   >
   > 
   >
   > 要总结的文本：<...>

   【策略2】指示模型在得出结论前先得出自己的解决方案。

   >确定这个学生的解决方案是否正确。
   >
   >问题：
   >
   >...
   >
   >学生的解决方案：
   >
   >1...
   >
   >2...
   >
   >3...
   >
   >答案。。。

   如果学生的答案正确过程错误，直接这样问，模型可能认为解决方案是对的。所以先让模型得出自己解决方案。

   > 确定这个学生的解决方案是否正确。
   >
   > 为此，你要执行以下步骤：
   >
   > 1. 得出你自己的解决方案
   > 2. 将你的和学生的解决方案做对比，评估学生的解决方案是否正确。在你没有自己做完问题之前，先不要决定学生的解决方案是否正确。
   >
   > 用以下格式：
   >
   > 问题：
   >
   > \```
   >
   > ...
   >
   > \```
   >
   > 学生的解决方案：
   >
   > \```
   >
   > ...
   >
   > \```
   >
   > 正确的解决方案：
   >
   > \```
   >
   > ...
   >
   > \```
   >
   > 学生的解决方案和正确的是否一致：
   >
   > \```
   >
   > 是/否
   >
   > \```
   >
   > 学生的分数：
   >
   > \```
   >
   > ...
   >
   > \```
   >
   > （然后给出我们要问的问题和给出的解决方案）
   >
   > 问题：
   >
   > \```
   >
   > ...
   >
   > \```
   >
   > 学生的解决方案：
   >
   > \```
   >
   > ...
   >
   > \```

3. 模型的**局限性**：Hallucination幻觉

   伪造听起来正确的回答。如问模型一个不存在的事物，它会编造其有关描述，听起来很真实。

   减少Hallucination的方法：让模型首先找相关信息，然后基于这些相关信息回答问题。

   

### 3.迭代

_**Idea -> Prompt -> Result -> Error Analysis -> Idea -> Prompt -> ...**_

【示例1】给出一份椅子的说明书，包括其产品描述、结构、尺寸、可选项、材料等等详细信息，现在希望基于这份说明书帮助在零售网站撰写描述。

> 你的任务是帮助一个销售团队撰写一份零售网站描述，基于一份技术说明书。
>
> 基于限定在三个反引号之间的技术说明书，写出产品描述。
>
>  技术说明书：\```...\```

模型很好地完成了任务，但生成的产品描述**太长了**。于是在Prompt中加入要求：最多50个词。（或者最多3句话，最多xx个字符）

模型重新生成了更短的产品描述。但是我们希望产品描述面向的是专业人员，想要展示**更多的技术细节**。于是在Prompt中加入要求：这个描述是为家具零售商准备的，所以应该是技术性的，关注椅子的材料、产品和结构。

模型生成了技术性描述。现在我们希望描述**加入产品ID信息**，于是在Prompt中加入要求：在描述的末尾，包含技术说明书中的每个产品ID。

还可以加入以下额外要求：

- 描述之后，包含一个名为“产品尺寸”的表格，第一列包含产品每个维度的名称，第二列包含单位为inch的测量值。
- 将所有结果以HTML格式输出， 以用于网站。将描述放在\<div>元素里。

### 4.摘要

_**让模型摘要文本，帮助人类进行更多的阅读。**_

假设我们运营一个电商网站，需要借助模型分析用户评价。

> 你的任务是生成下面这个电商网站的产品评论的简短摘要。
>
>  总结下面的限定于三个反引号中的评论，最多30词。
>
> 评论：\```...\```

模型给出了评论的总结。现在我们希望摘要**侧重于产品运输方面**，于是我们指示模型该总结是给运输公司的反馈。

> ... 该摘要会被反馈给运输公司。
>
> ... 聚焦于任何提到了产品运输的方面。
>
> 评论：\```...\```

 同理，可以指示模型给定价部门反馈，要聚焦于任何**提到价格的方面**。

也可以修改模型的任务为**提取信息**而不是生成简短摘要。



### 5.推理

_**提取标签、提取名称、理解文本情感等。**_

假设我们运营一个电商网站，需要借助模型分析用户评价是正面还是负面的。

> 你的任务是分析下面这个限定于三个反引号中的电商网站的产品评论是正面还是负面的。
>
> 评论：\```...\```

可以指示模型**仅输出一个词**，便于程序分析。

> ...
>
> 你的回答只应包含一个词：“正面”或“负面”。

可以指示模型**输出一系列单词**，描述评论包含的感情。

> 用一个列表指出评论者的所有感情，不超过5个词。用全小写、逗号分隔的形式输出。

可以指示模型**格外注意是否有某种感情**。

> 该评论包含愤怒的感情吗？你的回答是“是”或“否”。



另一方面，可以让模型进行**识别工作**。



可以指示模型识别评论者购买的产品、生产该产品的公司。



### 6.转换

【任务1】翻译

> 将下面限定于三个反引号中的内容翻译成英文。
>
> 内容：\```...\```

可以指定翻译出来的形式，如**正式和非正式**。

可以指定翻译出来的语气，如**模仿特定人群说话**。

【任务2】语调转换

> 将下面限定于三个反引号中的内容从俚语翻译成正式信函。
>
> 内容：\```...\```

【任务3】格式转换

> 将下面限定于三个反引号中的python字典从JSON格式转为HTML表格格式。
>
> 内容：\```...\```

【任务4】拼写和语法检查

> 检查下面限定于三个反引号中内容的语法和拼写错误，并写出改正后的版本。如果没有找到任何错误，就说没有找到错误。
>
> 内容：\```...\```

【任务5】检查社交媒体发言

> 校对和纠正；改变语气；润色。
>
> 内容：\```...\```



### 7.扩展

【任务1】自动回复邮件

> 你是一个客户服务AI助理，你的任务是给重要客户发送电子邮件回复，给定下面限定于三个反引号中的评论内容，生成回复以感谢客户的评论。如果评论的情绪是积极或中性的，感谢他们的评论；如果情绪是消极的，道歉并建议他们可以联系客户服务。确保使用评论中的具体细节，用简洁专业的语气写作，并以代理AI身份在电子邮件上签名。
>
> 评论：\```...\```

【温度】

类似于知识蒸馏中的温度。

构建需要可预测相应的应用程序时，使用温度0；

需要更有创意、更广泛的不同输出，使用更高温度。



### 8.聊天机器人





Created On : 2023-05-08
Last Modified : 2023-05-08